<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MIST Wordle - Positive Actions</title>
<style>
body {
  font-family: Georgia, serif;
  background-color: #121213;
  color: #ffffff;
  text-align: center;
  margin: 0;
  padding: 0;
}
h1 { font-size: 2em; margin: 20px 0; letter-spacing: 2px; font-weight: bold; }
p { color: #d7dadc; font-size: 1em; font-style: italic; }
input[type="text"], input[type="date"] {
  width: 220px; height: 40px; font-size: 18px; text-align: center;
  border: 2px solid #565758; border-radius: 8px;
  background-color: #121213; color: white; outline: none;
  margin-top: 10px; font-family: Georgia, serif;
  transition: border-color 0.3s;
}
input[type="text"]:focus { border-color: #6aaa64; }
button {
  background-color: #6aaa64; color: white; font-weight: bold; font-size: 18px;
  padding: 10px 25px; border: none; border-radius: 8px; cursor: pointer;
  margin-left: 10px; transition: 0.2s; font-family: Georgia, serif;
}
button:hover { background-color: #538d4e; }
#board { display: grid; grid-template-rows: repeat(6, 1fr); grid-gap: 8px; justify-content: center; margin-top: 20px; }
.row { display: flex; justify-content: center; gap: 5px; }
@keyframes flip {
  0% { transform: rotateX(0); }
  50% { transform: rotateX(90deg); }
  100% { transform: rotateX(0); }
}
.square {
  width: 60px; height: 60px; font-size: 26px; font-weight: bold;
  border: 2px solid #3a3a3c; border-radius: 6px;
  text-transform: uppercase; display: flex; justify-content: center; align-items: center;
  color: white; font-family: Georgia, serif; box-shadow: 0 2px 4px rgba(0,0,0,0.4);
  transform-style: preserve-3d; transition: background-color 0.3s ease, border 0.3s ease;
}
.green { background-color: #6aaa64; border: none; }
.yellow { background-color: #c9b458; border: none; }
.gray { background-color: #3a3a3c; border: none; }
#message { margin-top: 25px; font-size: 20px; font-weight: bold; color: #d7dadc; }
#keyboard { margin-top: 20px; }
.key-row { display: flex; justify-content: center; margin-bottom: 5px; gap: 5px; }
.key {
  padding: 10px 14px; border-radius: 6px; border: none;
  background-color: #818384; color: white; font-weight: bold;
  cursor: pointer; font-family: Georgia, serif; text-transform: uppercase;
  transition: background-color 0.3s;
}
.key.green { background-color: #6aaa64; }
.key.yellow { background-color: #c9b458; }
.key.gray { background-color: #3a3a3c; }
.key:hover { opacity: 0.8; }
/* Admin Overlay */
#adminOverlay {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.95); display:none; flex-direction:column;
  color:white; overflow:auto; padding:20px; z-index:1000;
}
#adminOverlay table { width:100%; border-collapse: collapse; margin-top:10px; }
#adminOverlay th, td { border:1px solid #fff; padding:5px; text-align:center; }
#adminOverlay input { width:150px; margin:5px; }
/* Dev login button bottom-right */
#devLoginBtn {
  position: fixed; bottom: 12px; right: 12px; width: 40px; height: 40px;
  border-radius: 20px; background-color: #6aaa64; border: none;
  color: white; font-size: 16px; cursor: pointer; opacity: 0.6; z-index: 9999;
}
</style>
</head>
<body>

<h1>MIST Wordle - Positive Actions</h1>
<p>Enter your Name, School, and Region to play!</p>

<input id="playerName" type="text" placeholder="Name">
<input id="playerSchool" type="text" placeholder="School">
<input id="playerRegion" type="text" placeholder="Region">
<br>
<button onclick="startGame()">Start Game</button>

<div id="gameArea" style="display:none;">
  <input type="text" id="guessInput" maxlength="5" placeholder="Enter guess">
  <button onclick="sendGuess()">Enter</button>
  <div id="board"></div>
  <div id="keyboard"></div>
  <p id="message"></p>
</div>

<!-- Admin Overlay -->
<div id="adminOverlay">
  <h2>Admin Panel</h2>
  <p id="adminInfo"></p>
  <div>
    Filter School: <input id="filterSchool" type="text">
    Filter Region: <input id="filterRegion" type="text">
    Start Date: <input id="filterStartDate" type="date">
    End Date: <input id="filterEndDate" type="date">
    <button id="applyFiltersBtn">Apply Filters</button>
  </div>
  <table id="adminTable">
    <thead><tr><th>Date</th><th>Name</th><th>School</th><th>Region</th><th>Word</th><th>Result</th></tr></thead>
    <tbody></tbody>
  </table>
</div>

<!-- Dev login button -->
<button id="devLoginBtn">‚öôÔ∏è</button>

<script>
// ------------------- WORD LIST (ALL PREVIOUS WORDS COMBINED) -------------------
const WORDS = [
  "deeds","faith","mercy","grace","trust","bloom","shine","light","peace","calm",
  "unity","angel","heart","flame","reach","guide","truth","elate","kindl","renew",
  "honor","glory","bliss","vital","cheer","thrive","awake","plain","gleam","dawns",
  "vision","nurtu","giver","joyed","moral","striv","spark","dream","bless","align",
  "aidor","uplft","smile","hope","brave","caring","valor","happy","glade","serve",
  "laugh","faith","truth","honor","glory","spark","dream","bless","cheer","thrive",
  "awake","plain","gleam","dawns","vision","giver","striv","align","uplft","peace",
  "faith","mercy","grace","trust","bloom","shine","light","calm","angel","heart",
  "flame","reach","guide","elate","kindl","renew","honor","glory","bliss","vital",
  "cheer","thrive","awake","plain","gleam","dawns","vision","nurtu","giver","joyed",
  "moral","striv","spark","dream","bless","align","aidor","uplft","shine","heart",
  "flame","light","bloom","trust","angel","guide","elate","renew","honor","grace",
  "bliss","vital","aidor","kindl","smile","hope","brave","caring","valor","happy",
  "glade","serve","laugh","peace","faith","truth","joyed","moral","spark","dream",
  "bless","cheer","thrive","awake","plain","gleam","dawns","vision","giver","striv",
  "align","uplft","shine","faith","trust","honor","glory","peace","mercy","deeds",
  "bloom","angel","heart","light","flame","dream","bless","spark","cheer","thrive",
  "awake","plain","gleam","dawns","vision","giver","striv","align","uplft"
];

// ------------------- GLOBALS -------------------
const MAX_GUESSES = 6;
let currentRow = 0;
let TARGET = "";
let playerName="", playerSchool="", playerRegion="";
const RECORDS_KEY = "wordlePlayHistory";
const ADMIN_PASSWORD = "WordleAdmin2026";

// ------------------- GAME INIT -------------------
function startGame(){
  playerName = document.getElementById("playerName").value.trim();
  playerSchool = document.getElementById("playerSchool").value.trim();
  playerRegion = document.getElementById("playerRegion").value.trim();
  if(!playerName || !playerSchool || !playerRegion){ alert("Please fill Name, School, and Region."); return; }

  document.getElementById("gameArea").style.display="block";

  const startDate = new Date("2025-01-01");
  const today = new Date();
  const dayIndex = Math.floor((today - startDate)/(1000*60*60*24));
  TARGET = WORDS[dayIndex % WORDS.length];

  const board = document.getElementById("board");
  board.innerHTML="";
  for(let i=0;i<MAX_GUESSES;i++){
    const row = document.createElement("div"); row.classList.add("row");
    for(let j=0;j<5;j++){
      const sq = document.createElement("div"); sq.classList.add("square"); row.appendChild(sq);
    }
    board.appendChild(row);
  }
  setupKeyboard();
  currentRow=0;
  document.getElementById("message").innerText="";
}

// ------------------- KEYBOARD -------------------
function setupKeyboard(){
  const keyboardLayout=[["Q","W","E","R","T","Y","U","I","O","P"],
                        ["A","S","D","F","G","H","J","K","L"],
                        ["ENTER","Z","X","C","V","B","N","M","BACK"]];
  const kb=document.getElementById("keyboard"); kb.innerHTML="";
  keyboardLayout.forEach(row=>{
    const r=document.createElement("div"); r.classList.add("key-row");
    row.forEach(key=>{
      const b=document.createElement("button"); b.classList.add("key"); b.dataset.key=key.toLowerCase(); b.textContent=key;
      b.onclick=()=>{ handleKey(b.dataset.key); }; r.appendChild(b);
    });
    kb.appendChild(r);
  });
}

function handleKey(k){
  const input=document.getElementById("guessInput");
  if(k==="enter"){ sendGuess(); }
  else if(k==="back"){ input.value=input.value.slice(0,-1); }
  else if(input.value.length<5){ input.value+=k; }
}

// ------------------- GUESS -------------------
function evaluateGuess(guess,target){
  let result=Array(5).fill("gray"), targetList=target.split("");
  for(let i=0;i<5;i++){ if(guess[i]===target[i]){ result[i]="green"; targetList[i]=null; } }
  for(let i=0;i<5;i++){ if(result[i]==="gray" && targetList.includes(guess[i])){ result[i]="yellow"; targetList[targetList.indexOf(guess[i])]=null; } }
  return result;
}

function sendGuess(){
  const input=document.getElementById("guessInput");
  const guess=input.value.toLowerCase();
  if(guess.length!==5){ alert("Enter a 5-letter word."); return; }
  if(currentRow>=MAX_GUESSES) return;

  const rows=document.querySelectorAll(".row"); const squares=rows[currentRow].children;
  const colors=evaluateGuess(guess,TARGET);
  for(let i=0;i<5;i++){ squares[i].textContent=guess[i]; squares[i].classList.add(colors[i]); squares[i].style.animation="flip 0.5s ease"; }
  updateKeyboardColors(guess,colors);

  let outcome="";
  if(guess===TARGET){
    document.getElementById("message").innerText="üéâ You guessed it! ("+TARGET+")"; outcome="WIN"; input.disabled=true;
  }else if(currentRow===MAX_GUESSES-1){
    document.getElementById("message").innerText="‚ùå Out of guesses. Word was: "+TARGET.toUpperCase(); outcome="LOSE"; input.disabled=true;
  }

  // record play
  recordPlay(playerName,playerSchool,playerRegion,TARGET,outcome);

  currentRow++; input.value="";
}

function updateKeyboardColors(guess,colors){
  guess.split("").forEach((letter,idx)=>{
    const keyBtn=document.querySelector(`.key[data-key="${letter}"]`);
    if(!keyBtn) return;
    if(colors[idx]==="green") keyBtn.className="key green";
    else if(colors[idx]==="yellow") keyBtn.className="key yellow";
    else if(colors[idx]==="gray") keyBtn.className="key gray";
  });
}

// ------------------- PLAY HISTORY -------------------
function recordPlay(name,school,region,word,result){
  const history=JSON.parse(localStorage.getItem(RECORDS_KEY)||"[]");
  history.push({date:new Date().toISOString(),name,school,region,word,result});
  localStorage.setItem(RECORDS_KEY,JSON.stringify(history));
}

// ------------------- ADMIN PANEL -------------------
const devBtn=document.getElementById("devLoginBtn");
devBtn.onclick=()=>{
  const pass=prompt("Enter admin password:");
  if(pass!==ADMIN_PASSWORD){ alert("Wrong password"); return; }
  showAdminPanel();
};

function showAdminPanel(){
  const overlay=document.getElementById("adminOverlay");
  overlay.style.display="flex";
  displayAdminRecords();
}

function displayAdminRecords(filter={}) {
  const history=JSON.parse(localStorage.getItem(RECORDS_KEY)||"[]");
  let filtered=history;
  if(filter.school) filtered=filtered.filter(r=>r.school.toLowerCase().includes(filter.school.toLowerCase()));
  if(filter.region) filtered=filtered.filter(r=>r.region.toLowerCase().includes(filter.region.toLowerCase()));
  if(filter.startDate) filtered=filtered.filter(r=>new Date(r.date)>=new Date(filter.startDate));
  if(filter.endDate) filtered=filtered.filter(r=>new Date(r.date)<=new Date(filter.endDate));
  const tbody=document.querySelector("#adminTable tbody"); tbody.innerHTML="";
  filtered.forEach(r=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${new Date(r.date).toLocaleString()}</td><td>${r.name}</td><td>${r.school}</td><td>${r.region}</td><td>${r.word}</td><td>${r.result}</td>`;
    tbody.appendChild(tr);
  });
}

// Filter button
document.getElementById("applyFiltersBtn").onclick=()=>{
  const school=document.getElementById("filterSchool").value.trim();
  const region=document.getElementById("filterRegion").value.trim();
  const startDate=document.getElementById("filterStartDate").value;
  const endDate=document.getElementById("filterEndDate").value;
  displayAdminRecords({school,region,startDate,endDate});
};
</script>
</body>
</html>

